<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<f:view locale="#{loginBean.locale}">
	<f:loadBundle basename="messages" var="msg" />
	<h:head>
		<meta http-equiv="X-UA-Compatible" content="IE-edge" />
		<meta name="viewport" content="width-device-width, initial-scale=1" />
		<link rel="stylesheet" href="css/bootstrap.css" />
		<link rel="stylesheet" href="css/bootstrap-theme.css" />
		<link rel="stylesheet" href="css/superpass.css" />
		<script src="scripts/jquery-3.1.1.min.js"></script>
		<script src="scripts/bootstrap.js"></script>
		<script src="scripts/bCrypt.js" type="text/javascript"></script>
		<script src="scripts/superpass.js" type="text/javascript"></script>
		<title><h:outputText value="#{msg.title}" /></title>
		 <script type="text/javascript">
  
    function result(hash){    
        $("#password").val(hash);
        $("#pwdForm").submit();
    }
  
    function crypt()
    {
  
 
      
        // Weitere Checks ausf√ºhren
      
        var salt;
        try
        {
                salt = gensalt(13);
        }
        catch(err) 
        {
                alert(err);
                return;
        }
      
        try
        {
            hashpw($("#password").val(), salt, result);
        } 
        catch(err) 
        {
                alert(err);
                return;
        }
  
    }
  
    </script>
	</h:head>
	<h:body>
		<div class="container">
			<!-- Holt das Sprachmenu -->
			<ui:include src="/templates/menu_language.xhtml" />
			<div class="jumbotron">
				<p>
					<h:outputText value="#{msg.newUser}" />
				</p>

			</div>
			<div>
				<!-- Holt das Hauptmenu -->
				<ui:include src="/templates/menu.xhtml" />
			</div>
			<div class="content">
				<h:form id="pwdForm">
					<div class="form-group">
						<label>#{msg.yourEmail}</label>
						<h:inputText value="#{indexActionBean.user2.userEmail}"
							id="userEmail" required="true" requiredMessage="#{msg.notNull}"
							styleClass="form-control">
							<f:validator
								validatorId="ch.bfh.guggisberg.stefan.validator.EmailValidator" />
						</h:inputText>
						<h:message for="userEmail" style="color:red" />
					</div>
					<div class="form-group">
						<label>#{msg.yourName}</label>
						<h:inputText value="#{indexActionBean.user2.userName}"
							id="userName" required="true" requiredMessage="#{msg.notNull}"
							styleClass="form-control" />
						<h:message for="userName" style="color:red" />
					</div>
					<div class="form-group">
						<label>#{msg.yourMasterPassword}</label>
						<h:inputSecret value="#{indexActionBean.user2.userPassword}"
							id="password" required="true"
							requiredMessage="#{msg.notNull}" styleClass="form-control" />
						<h:message for="password2" style="color:red" />
					</div>

					<div class="row">

						<div class="col-lg-12"></div>
						<h:commandButton action="#{indexActionBean.addUser}"
							value="#{msg.register}" styleClass="btn btn-success" onclick="crypt()" />

					</div>
				</h:form>
			</div>
		</div>

	</h:body>
</f:view>

</html>
